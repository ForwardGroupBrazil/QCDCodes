process SimDigiReco = {
###############################
# Some Services
  include "Configuration/ReleaseValidation/data/Services.cfi"


  ###############################
  # MessageLogger
  include "Configuration/Examples/data/MessageLogger.cfi"


  ###############################
  # Random Number Generator
  service = RandomNumberGeneratorService
  {
    untracked uint32 sourceSeed = ${RANDOM}
    PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 123456789
         untracked uint32 g4SimHits = 98765
         untracked uint32 mix = 965
      }
  }

     ##########
     # This needs to be included or else you get
     # "no PDTRecord" exception when running
     #
     include "SimGeneral/HepPDTESSource/data/pdt.cfi"

###############################
# Input Module:

#include "IOMC/GeneratorInterface/data/PythiaHZZ4mu.cff"
#replace PythiaSource.maxEvents = ${MAXEVENTS}

#include "UserCode/AEverett/MyGenerators/data/source/source_ttbar.cff"
#replace PythiaSource.maxEvents = ${MAXEVENTS}

include "UserCode/AEverett/MyGenerators/data/source/source_single_mu_pt_10_100_negative.cff"
replace  FlatRandomPtGunSource.maxEvents = ${MAXEVENTS}


###############################
# Output Module:
  include "UserCode/AEverett/MyGenerators/data/DropSimCalStuff.cfi"
  include "Configuration/Examples/data/DropTrackingIntermediateStuff.cff"

  module GEN-SIM-DIGI-RECO = PoolOutputModule {
      untracked string fileName = "reco.root"
      #using DropSimCalStuff
      using DropTrackingIntermediateStuff
  }

###############################
# Simulation and Digitization

  #########
  # Run Simulation and Digitization
  #
  include "Configuration/StandardSequences/data/Simulation.cff"

  sequence doAllDigi_noCAL = { trDigi & muonDigi }

  ##########
  # Mixing Module
  #
  include "Configuration/StandardSequences/data/MixingNoPileUp.cff"

  ##########
  # L1Emulation
  #
  include "L1Trigger/GlobalMuonTrigger/data/l1muon.cff"

  #########
  # Reconstruction
  #
  include "Configuration/StandardSequences/data/Reconstruction.cff"
 
  sequence localreco_noCAL = { trackerlocalreco & muonlocalreco }
  sequence globalreco_noCAL = { ckftracks, rstracks, muonreco }
  sequence highlevelreco_noCAL = {
				recopixelvertexing, 
				vertexreco
           }
  sequence reconstruction_noCAL = {
                                 localreco_noCAL,
 				 globalreco_noCAL,
 				 highlevelreco_noCAL
           }
 


###############################
# now define what you want to do

  #path p = { psim, mix, pdigi, l1muon, reconstruction}
  path p = { psim, mix, doAllDigi_noCAL, l1muon, reconstruction_noCAL}

  endpath outpath = {GEN-SIM-DIGI-RECO}	

}
