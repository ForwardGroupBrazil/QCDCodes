process SimDigi = 
{
###############################
#Some Services:

     include "Configuration/ReleaseValidation/data/Services.cfi"

     #initialize  MessageLogger
     include "FWCore/MessageLogger/data/MessageLogger.cfi"	

     service = RandomNumberGeneratorService
     {
          untracked uint32 sourceSeed = 9874358
          PSet moduleSeeds =
          {
               untracked uint32 VtxSmeared = 1334589
          }
     }

     # This needs to be included or else you get
     # "no PDTRecord" exception when running
     #
     include "SimGeneral/HepPDTESSource/data/pdt.cfi"

###############################
#input module:

     include "UserCode/AEverett/MyGenerators/data/source/source_single_mu_pt_10_100_negative.cff"
     replace  FlatRandomPtGunSource.maxEvents = 3

###############################
#output module:

     include "UserCode/AEverett/MyGenerators/data/DropSimCalStuff.cfi"

     module o1 = PoolOutputModule {
          untracked string fileName = "digi.root"
          using DropSimCalStuff
     } 

###############################
#Simulation and Digitization

   # Standard Vertex Smearing
   #
   include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"

   # Simulation-Digitization chain
   #
   #include "SimG4Core/Application/data/SIM-DIGI.cff"
   include "SimG4Core/Application/data/SIM-DIGIWithEcalZeroSuppression.cff"

   sequence doDigi_noCAL = { mix, trDigi & muonDigi }

   sequence doSimDigi_noCAL = { g4SimHits, doDigi_noCAL }

   #path p1 = { VtxSmeared, doG4SimHitsDigiEcalZeroSup }	
   path p1 = { VtxSmeared, doSimDigi_noCAL }	

   endpath outpath = { o1 }
   
}		
